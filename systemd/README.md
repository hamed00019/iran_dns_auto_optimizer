# **مستندات سرویس‌های Systemd**

این پوشه شامل فایل‌های سرویس مورد نیاز برای مدیریت و زمان‌بندی اجرای اسکریپت dns-optimizer با استفاده از systemd است.

## **فایل‌ها**

### **📄 dns-optimizer.service**

این فایل یک unit از نوع service برای systemd تعریف می‌کند. وظیفه اصلی آن، مشخص کردن نحوه اجرای اسکریپت اصلی است.

* **\[Unit\]**: توضیحات کلی سرویس و وابستگی‌های آن را مشخص می‌کند.  
* **\[Service\]**:  
  * **Type=oneshot**: نشان می‌دهد که این سرویس یک کار را یک‌بار انجام داده و سپس خارج می‌شود.  
  * **ExecStart**: دستوری که برای اجرای سرویس فراخوانی می‌شود. در اینجا، اسکریپت /usr/local/bin/dns-optimizer با پارامتر run اجرا می‌شود.  
  * **RemainAfterExit=true**: مشخص می‌کند که حتی پس از اتمام اجرا، سرویس به عنوان "فعال" در نظر گرفته شود. این ویژگی برای هماهنگی با فایل timer مفید است.

### **⏰ dns-optimizer.timer**

این فایل یک unit از نوع timer برای systemd است که وظیفه زمان‌بندی اجرای سرویس dns-optimizer.service را بر عهده دارد.

* **\[Unit\]**: توضیحات تایمر را ارائه می‌دهد.  
* **\[Timer\]**:  
  * **OnBootSec**: مشخص می‌کند که اولین اجرا، ۵ دقیقه پس از بوت شدن سیستم انجام شود.  
  * **OnUnitActiveSec**: مشخص می‌کند که اجرای بعدی، ۱۲ ساعت پس از آخرین اجرای موفق سرویس انجام شود. این کار تضمین می‌کند که DNSها به صورت دوره‌ای به‌روزرسانی می‌شوند.  
  * **Unit**: سرویسی که این تایمر آن را فعال می‌کند (dns-optimizer.service).  
* **\[Install\]**:  
  * **WantedBy=timers.target**: مشخص می‌کند که با فعال کردن این تایمر (systemctl enable), یک لینک به آن در timers.target ایجاد شود تا systemd آن را مدیریت کند.

به طور خلاصه، فایل .service **"چه کاری"** باید انجام شود را تعریف می‌کند و فایل .timer **"چه زمانی"** باید آن کار انجام شود را مشخص می‌نماید.
