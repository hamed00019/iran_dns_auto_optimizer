# **DNS Optimizer ๐ (ูุณุฎู ุจุงุฒููุณ ู ุงูู ุดุฏู)**

ุงู ูพุฑูฺู ฺฉ ุงุณฺฉุฑูพุช Bash ูุฏุฑุชููุฏ ุจุฑุง ูพุฏุง ฺฉุฑุฏู ุณุฑุนโุชุฑู ู ุงููโุชุฑู ุณุฑูุฑ DNS ุจุฑุง ุงุชุตุงู ุงูุชุฑูุช ุดูุง ู ุชูุธู ุฎูุฏฺฉุงุฑ ุขู ุงุณุช. ุงู ุงุจุฒุงุฑ ุจุง ุฏุฑ ูุธุฑ ฺฏุฑูุชู ุจูุชุฑู ุดููโูุง ุงููุช ู ุนููฺฉุฑุฏ ุจุงุฒููุณ ุดุฏู ุงุณุช ุชุง ุงุฒ ูุฑฺฏููู ุขุณุจโูพุฐุฑ ุฌููฺฏุฑ ฺฉูุฏ.

## **โจ ูฺฺฏโูุง ฺฉูุฏ**

* **ุงููุช ุจุงูุง:**  
  * ุจุฏูู ุงุณุชูุงุฏู ุงุฒ ุฏุณุชูุฑุงุช ุฎุทุฑูุงฺฉ ูุงููุฏ eval.  
  * ุงุฌุฑุง ุงุณฺฉุฑูพุช ุจุง ุญุฏุงูู ุฏุณุชุฑุณโูุง ูุงุฒู.  
  * ุงููโุณุงุฒ ูุงูโูุง ูููุช ู ฺฉุงููฺฏ ุจุง ุณุทูุญ ุฏุณุชุฑุณ ูุญุฏูุฏ.  
  * ุฌููฺฏุฑ ุงุฒ ุญููุงุช Race Condition ุจุง ุงุณุชูุงุฏู ุงุฒ flock.  
* **ุชุณุช ููุงุฒ ู ููุดููุฏ:**  
  * ุชุณุช ููุฒูุงู ฺูุฏู ุณุฑูุฑ DNS ุจุง ฺฉูุชุฑู ุชุนุฏุงุฏ ูพุฑุฏุงุฒุดโูุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ูุตุฑู ุจุด ุงุฒ ุญุฏ ููุงุจุน.  
  * ูุงุจูุช ุชูุธู ุชุนุฏุงุฏ ุชุณุชโูุง ู ุฏุงูููโูุง ุจุฑุง ูุฑ ุณุฑูุฑ.  
* **ุณุงุฒฺฏุงุฑ ฺฏุณุชุฑุฏู:**  
  * ุดูุงุณุง ุฎูุฏฺฉุงุฑ ุชูุฒุนโูุง ูุฎุชูู (Debian, Ubuntu, CentOS, Fedora, Arch) ู ูุตุจ ูุงุฒููุฏโูุง.  
  * ูพุดุชุจุงู ุงุฒ systemd-resolved ู ูุฏุฑุช ูุณุชูู /etc/resolv.conf.  
* **ูุฏุฑุช ุขุณุงู:**  
  * ูุงู ฺฉุงููฺฏ ุฎุงุฑุฌ ู ุฎูุงูุง (/etc/dns-optimizer.conf).  
  * ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ูพุดุชุจุงู ุงุฒ ุชูุธูุงุช DNS ูุจู ุงุฒ ูุฑ ุชุบุฑ.  
  * ฺฏุฒุงุฑุดโุฏู (Logging) ุฏูู ุจุง ูุงุจูุช ฺุฑุฎุด ูุงฺฏ (Log Rotation).  
* **ูุตุจ ู ุญุฐู ุฎูุฏฺฉุงุฑ:**  
  * ุงุณฺฉุฑูพุช install.sh ููุดููุฏ ุจุฑุง ูุตุจุ ุจูโุฑูุฒุฑุณุงู ู ุญุฐู ฺฉุงูู ุจุฑูุงูู.  
* **ุงุฌุฑุง ุฒูุงูโุจูุฏ ุดุฏู:**  
  * ุฑุงูโุงูุฏุงุฒ ุฎูุฏฺฉุงุฑ ุจู ุตูุฑุช ุฏูุฑูโุง ุจุง ุงุณุชูุงุฏู ุงุฒ systemd timer ุจุฑุง ุจูโุฑูุฒ ูฺฏู ุฏุงุดุชู DNSูุง.

## **๐ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ**

ุจุฑุง ูุตุจุ ฺฉุงูุณุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุฎูุฏ ุงุฌุฑุง ฺฉูุฏ. ุงู ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ููุดููุฏ ูุงุฒููุฏโูุง ุฑุง ุจุฑุฑุณ ู ูุตุจ ฺฉุฑุฏู ู ุณุฑูุณโูุง ุฑุง ูุนุงู ูโฺฉูุฏ.

bash \-c "$(curl \-fsSL \[https://raw.githubusercontent.com/hamed00019/iran\_dns\_auto\_optimizer/main/install.sh\](https://raw.githubusercontent.com/hamed00019/iran\_dns\_auto\_optimizer/main/install.sh))"

**ูฺฉุชู:** ุงุณฺฉุฑูพุช ูุตุจ ุงุฒ ุดูุง ุฏุฑุฎูุงุณุช ุฑูุฒ ุนุจูุฑ sudo ุฎูุงูุฏ ฺฉุฑุฏุ ุฒุฑุง ุจุฑุง ูุตุจ ูุงูโูุง ุฏุฑ ูุณุฑูุง ุณุณุชู ุจู ุฏุณุชุฑุณ ุฑูุช ูุงุฒ ุฏุงุฑุฏ.

## **๐ ุฑุงูููุง ุงุณุชูุงุฏู**

ุงุณฺฉุฑูพุช dns-optimizer ูพุณ ุงุฒ ูุตุจ ุจู ุตูุฑุช ฺฉ ุฏุณุชูุฑ ุณุฑุงุณุฑ ุฏุฑ ุฏุณุชุฑุณ ุฎูุงูุฏ ุจูุฏ.

**ุณุงุฎุชุงุฑ ุฏุณุชูุฑ:** sudo dns-optimizer \[command\]

| ุฏุณุชูุฑ | ุชูุถุญุงุช |
| :---- | :---- |
| run | **(ูพุดโูุฑุถ)** ุงุฌุฑุง ุจูููโุณุงุฒ ุงุณุชุงูุฏุงุฑุฏ ุจุฑ ุงุณุงุณ ุชูุธูุงุช. |
| quick | ุงุฌุฑุง ุจูููโุณุงุฒ ุณุฑุน (ุชุณุช ุณุฑูุฑูุง ุจุง ุงูููุช ุจุงูุง ู ุฏุงูููโูุง ฺฉูุชุฑ). |
| full | ุงุฌุฑุง ุจูููโุณุงุฒ ฺฉุงูู (ุชุณุช ุชูุงู ุณุฑูุฑูุง ู ุฏุงูููโูุง). |
| status | ููุงุด ูุถุนุช ูุนู DNS ู ุณุฑูุณ ุฒูุงูโุจูุฏ. |
| restore | ุจุงุฒฺฏุฑุฏุงู ุขุฎุฑู ุชูุธูุงุช DNS ุงุฒ ูุงู ูพุดุชุจุงู. |
| log \[N\] | ููุงุด N ุฎุท ุขุฎุฑ ุงุฒ ูุงู ูุงฺฏ (ูพุดโูุฑุถ: 20). |
| config | ุจุงุฒ ฺฉุฑุฏู ูุงู ฺฉุงููฺฏ ุจุฑุง ูุฑุงุด ุจุง ูุฑุงุดฺฏุฑ ูพุดโูุฑุถ. |
| help | ููุงุด ุงู ุฑุงูููุง. |

**ูุซุงูโูุง:**

* **ุงุฌุฑุง ุจูููโุณุงุฒ ุงุณุชุงูุฏุงุฑุฏ:**  
  sudo dns-optimizer run

* **ูุดุงูุฏู ูุถุนุช ูุนู:**  
  dns-optimizer status

* **ุจุงุฒฺฏุฑุฏุงูุฏู ุชูุธูุงุช ูุจู:**  
  sudo dns-optimizer restore

## **๐๏ธ ุดุฎุตโุณุงุฒ**

ุชูุงู ุชูุธูุงุช ุงุณฺฉุฑูพุชุ ุงุฒ ุฌููู ูุณุช ุณุฑูุฑูุง DNSุ ุฏุงูููโูุง ุชุณุชุ ู ูพุงุฑุงูุชุฑูุง ุนููฺฉุฑุฏุ ุฏุฑ ูุงู ุฒุฑ ูุงุจู ุชุบุฑ ูุณุชูุฏ:  
/etc/dns-optimizer.conf  
ุจุฑุง ูุฑุงุด ุขุณุงู ุงู ูุงูุ ุงุฒ ุฏุณุชูุฑ ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:

sudo dns-optimizer config

## **๐๏ธ ุญุฐู (Uninstall)**

ุจุฑุง ุญุฐู ฺฉุงูู ุงุณฺฉุฑูพุชุ ุณุฑูุณโูุง ู ูุงูโูุง ฺฉุงููฺฏุ ฺฉุงูุณุช ุงุณฺฉุฑูพุช ูุตุจ ุฑุง ุจุง ุขุฑฺฏููุงู uninstall ุงุฌุฑุง ฺฉูุฏ:

bash \-c "$(curl \-fsSL \[https://raw.githubusercontent.com/hamed00019/iran\_dns\_auto\_optimizer/main/install.sh\](https://raw.githubusercontent.com/hamed00019/iran\_dns\_auto\_optimizer/main/install.sh))" \-- uninstall

ุงู ุฏุณุชูุฑ ุชูุงู ูุงูโูุง ูุตุจ ุดุฏู ู ุณุฑูุณโูุง systemd ุฑุง ุจู ุตูุฑุช ฺฉุงูู ูพุงฺฉโุณุงุฒ ูโฺฉูุฏ.
